{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Neuro IA - ACV</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="" />
    <meta name="keywords" content="">
    <meta name="author" content="Phoenixcoded" />

    <!-- Font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"
        integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Favicon icon -->
    <link rel="icon" href="{% static '/assets/images/favicon.svg' %}" type="image/x-icon">

    <!-- font css -->
    <link rel="stylesheet" href="{% static '/assets/fonts/font-awsome-pro/css/pro.min.css' %}">
    <link rel="stylesheet" href="{% static '/assets/fonts/feather.css' %}">
    <link rel="stylesheet" href="{% static '/assets/fonts/fontawesome.css' %}">

    <!-- vendor css -->
    <link rel="stylesheet" href="{% static '/assets/css/style.css' %}">
    <link rel="stylesheet" href="{% static '/assets/css/customizer.css' %}">

	<!-- Select2 -->
	<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
	
</head>
<body class="">
    <style>
        body{
            background-color: #f0f2f8 !important;
        }
    </style>
    
	<!-- [ Pre-loader ] start -->
	<div class="loader-bg">
		<div class="loader-track">
			<div class="loader-fill"></div>
		</div>
	</div>
	<!-- [ Pre-loader ] End -->

	<!-- [ Mobile header ] start -->
	<div class="pc-mob-header pc-header">
		<div class="pcm-logo">
			<img style="height: 50px; width: 50px;" src="{% static 'login/images/logo_redondeado.png'%}" alt="" class="logo logo-lg ml-3">
            <label for="" class="mt-2 ml-3"><b style="font-size: 1.2em; color: #fff;">NEURO IA</b></label>
		</div>
		<div class="pcm-toolbar">
			<a href="#!" class="pc-head-link" id="mobile-collapse">
				<div class="hamburger hamburger--arrowturn">
					<div class="hamburger-box">
						<div class="hamburger-inner"></div>
					</div>
				</div>
				<!-- <i data-feather="menu"></i> -->
			</a>

			<a href="#!" class="pc-head-link" id="header-collapse">
				<i data-feather="more-vertical"></i>
			</a>
		</div>
	</div>
	<!-- [ Mobile header ] End -->

	<!-- [ navigation menu ] start -->
	<nav class="pc-sidebar ">
		<div class="navbar-wrapper">
			<div class="m-header" >
				<a href="{% url 'home' %}" class="b-brand d-flex align-items-center ">
					<!-- ========   change your logo hear   ============ -->
          <img style="height: 50px; width: 50px;" src="{% static 'login/images/logo_redondeado.png'%}" alt="" class="logo logo-lg ml-3">
          <label for="" class="mt-2 ml-3"><b style="font-size: 1.2em; color: #fff;">NEURO IA</b></label>
					<!-- <img src="{% static '/assets/images/logo-sm.svg' %}" alt="" class="logo logo-sm"> -->
				</a>
			</div>
			<div class="navbar-content">
				<ul class="pc-navbar">
					
					<li class="pc-item pc-caption">
						<label>Navegación</label>
					</li>
					<li class="pc-item">
						<a href="{% url 'home' %}" class="pc-link "><span class="pc-micon"><i data-feather="home"></i></span><span class="pc-mtext">Home</span></a>
					</li>					
					<li class="pc-item pc-caption">
						<label>Registros</label>
					</li>
					<li class="pc-item">
						<a href="{% url 'listar_usuarios' %}" class="pc-link "><span class="pc-micon"><i class="fa-solid fa-users"></i></span><span class="pc-mtext"> Usuarios</span><span class="pc-arrow"><i data-feather="chevron-right"></i></span></a>
					</li>
					<li class="pc-item">
						<a href="" class="pc-link "><span class="pc-micon"><i class="fa-solid fa-suitcase-medical"></i></span><span class="pc-mtext">Médicos</span></a>
					</li>
          <li class="pc-item">
						<a href="{% url 'listar_pacientes' %}" class="pc-link "><span class="pc-micon"><i class="fa-solid fa-hospital-user"></i></i></span><span class="pc-mtext"> Pacientes</span></a>
					</li>					
          <li class="pc-item pc-caption">
						<label>DIAGNÓSTICOS</label>
					</li>
					<li class="pc-item">
						<a href="" class="pc-link "><span class="pc-micon"><i class="fa-sharp fa-solid fa-list-check"></i></span><span class="pc-mtext">Diagnóstico de ACV</span></a>
					</li>					
          <li class="pc-item">
						<a href="" class="pc-link "><span class="pc-micon"><i class="fa-sharp fa-solid fa-list-check"></i></span><span class="pc-mtext">Estilo de Vida</span></a>
					</li>
          <li class="pc-item">
						<a href="" class="pc-link "><span class="pc-micon"><i class="fa-sharp fa-solid fa-list-check"></i></span><span class="pc-mtext">Factores Médicos</span></a>
					</li>
				</ul>
			</div>
		</div>
	</nav>
	<!-- [ navigation menu ] end -->
    
	<!-- [ Header ] start -->
	<header class="pc-header ">
		<div class="header-wrapper">
			<div class="mr-auto pc-mob-drp">
				<ul class="list-unstyled">
					<li class="dropdown pc-h-item">
						<div class="dropdown-menu pc-h-dropdown">
							<a href="#!" class="dropdown-item">
								<i data-feather="user"></i>
								<span>Mi cuenta</span>
							</a>
							<a href="{% url 'logout_view' %}" class="dropdown-item">
								<i data-feather="power"></i>
								<span>Salir</span>
							</a>
						</div>
					</li>
				</ul>
			</div>
			<div class="ml-auto">
				<ul class="list-unstyled">
					<li class="dropdown pc-h-item">
						<a class="pc-head-link dropdown-toggle arrow-none mr-0" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
							<img src="{% static '/assets/images/user/avatar.png' %}" alt="user-image" class="user-avtar">
							<span>
							
								<span class="user-name" style="text-transform: uppercase;" id="username-display1">Username</span>		
								<span class="user-desc">Administrator</span>
							</span>
						</a>
						<div class="dropdown-menu dropdown-menu-right pc-h-dropdown">
							<div class=" dropdown-header">
								<h6 class="text-overflow m-0">Bienvenido !</h6>
							</div>
							<a href="#!" class="dropdown-item">
								<i data-feather="user"></i>
								<span>Mi cuenta</span>
							</a>
							<a href="{% url 'logout_view' %}" class="dropdown-item" id="logout-button">
								<i data-feather="power"></i>
								<span>Salir</span>
							</a>
						</div>
					</li>
				</ul>
			</div>

		</div>
	</header>
	<!-- [ Header ] end -->

<!-- [ Main Content ] start -->
<div class="pc-container">
    {% block content %}
        {% block css %}{% endblock %}   
            
    {% endblock %}
</div>
<!-- [ Main Content ] end -->
</div>

<!-- <footer class="footer"> © 2024 Posgrado by <a href="#">Mishael Rojas Valiente</a> </footer>-->



    <!-- Required Js -->
    <script src="{% static '/assets/js/vendor-all.min.js' %}"></script>
    <!-- <script src="{% static '/assets/js/plugins/bootstrap.min.js' %}"></script>  -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/js/bootstrap.min.js"></script>  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/js/bootstrap.min.js"></script> 


    <script src="{% static '/assets/js/plugins/feather.min.js' %}"></script>
    <script src="{% static '/assets/js/pcoded.min.js' %}"></script> 
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js'"></script> -->
    <script src="{% static '/assets/js/plugins/clipboard.min.js' %}"></script>
    <!-- <script src="{% static '/assets/js/uikit.min.js' %}"></script> -->

    <!-- Apex Chart -->
    <script src="{% static '/assets/js/plugins/apexcharts.min.js' %}"></script>
    <!-- <script>
        $("body").append('<div class="fixed-button active"><a href="https://1.envato.market/VGznk" target="_blank" class="btn btn-md btn-success"><i class="fa fa-shopping-cart" aria-hidden="true"></i> Upgrade To Pro</a> </div>');
    </script> -->
	<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      document.getElementById('logout-button').addEventListener('click', function (event) {
        event.preventDefault();

        const token = localStorage.getItem('token');  // Obtener el token de localStorage

        fetch("{% url 'logout_view' %}", {
          method: 'POST',
          headers: {
            'X-CSRFToken': '{{ csrf_token }}',  // Incluye el token CSRF
            'Authorization': `Token ${token}`,  // Incluye el token de autenticación
            'Content-Type': 'application/json'
          },
          credentials: 'same-origin'
        })
          .then(response => {
            if (response.ok) {
              // Eliminar el token de localStorage
              localStorage.removeItem('token');

              // Redirigir a la página de inicio
              window.location.href = "{% url 'login_view' %}";
            } else {
              console.error('Error al hacer logout');
              return response.text();  // Obtener el contenido del error
            }
          })
          .then(errorText => {
            console.error('Detalles del error:', errorText);
          })
          .catch(error => console.error('Error:', error));
      });
    });
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
        const token = localStorage.getItem('token');
        
        if (!token) {
            window.location.href = '/auth/login/';
            return;
        }

        fetch('/user/', {  // Usa la ruta configurada en urls.py
            method: 'GET',
            headers: {
                'Authorization': `Token ${token}`
            }
        })
        .then(response => response.json())
        .then(data => {
            document.getElementById('username-display1').textContent = `${data.username}`;
        })
        .catch(error => {
            console.error('Error:', error);
            document.getElementById('username-display1').textContent = 'Error al cargar el usuario';
        });

        document.getElementById('logout-button').addEventListener('click', function() {
            localStorage.removeItem('token');
            window.location.href = '/auth/login/';
        });
    });
  </script>
<!-- custom-chart js -->
<!-- <script src="{% static '/assets/js/pages/dashboard-sale.js' %}"></script> -->
{% block js %}{% endblock %} 
</body>
</html>