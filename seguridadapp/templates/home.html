{% extends "plantilla.html" %}
{% block title %} PREDICCIÓN | Home {% endblock title %}
{% comment %} {% block titleContent %}  {% endblock titleContent %} {% endcomment %}
{% load static %}
{% block content %}
    <div class="p-5">
        
        <div class="container px-2 py-1" id="custom-cards">
            <!-- <h2 class="pb-2 border-bottom">Custom cards</h2> -->
            <div class="container d-flex text-center">               
                <b id="username-display" style="font-size: 2em;">Cargando...</b>
            </div>
            <div class="row row-cols-1 row-cols-lg-3 align-items-stretch g-4 py-5">

                <div class="col">
                    <div class="card shadow-sm" style="background-color: #fff; color: black;">
                        <img src="{% static 'login/images/obj1.png'%}"  width="100%" height="225"  alt="Bootstrap" width="32" height="32" class="" style="background-color: #fff;">

                        <div class="card-body">
                            <h4 class=" display-8 lh-1 fw-bold" style="color: #1E88E5;">Diagnóstico de ACV</h4>
                            <p class="card-text">Diagnóstico rápido realizado mediante machine learning.</p>
                            <div class="d-flex justify-content-end align-items-center">     
                                <a href="" type="button" class="btn" style="color: #fff; background-color: #1E88E5;">Continuar</a>
                            </div>
                        </div>
                    </div>
                </div>

                
                <div class="col">
                    <div class="card shadow-sm" style="background-color: #fff; color: black;">
                        <img src="{% static 'login/images/obj2.png'%}"  width="100%" height="225"  alt="Bootstrap" width="32" height="32" class="" style="background-color: #fff;">

                        <div class="card-body">
                            <h4 class=" display-8 lh-1 fw-bold" style="color: #1E88E5;">Segmentación de pacientes</h4>
                            <p class="card-text">Los pacientes son clasificados según su estilo de vida.</p>
                            <div class="d-flex justify-content-end align-items-center">     
                                <a href="" type="button" class="btn" style="color: #fff; background-color: #1E88E5;">Continuar</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col">
                    <div class="card shadow-sm" style="background-color: #fff; color: black;">
                        <img src="{% static 'login/images/obj3.png'%}"  width="100%" height="225"  alt="Bootstrap" width="32" height="32" class="" style="background-color: #fff;">

                        <div class="card-body">
                            <h4 class=" display-8 lh-1 fw-bold" style="color: #1E88E5;">Segmentación de pacientes</h4>
                            <p class="card-text">Los pacientes son clasificados según sus factores medicos</p>
                            <div class="d-flex justify-content-end align-items-center">     
                                <a href="" type="button" class="btn" style="color: #fff; background-color: #1E88E5;">Continuar</a>
                            </div>
                        </div>
                    </div>
                </div>
                    
                
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const token = localStorage.getItem('token');
            
            if (!token) {
                window.location.href = '/auth/login/';
                return;
            }
    
            fetch('/user/', {  // Usa la ruta configurada en urls.py
                method: 'GET',
                headers: {
                    'Authorization': `Token ${token}`
                }
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('username-display').textContent = `Bienvenido, ${data.username}! 👋`;
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('username-display').textContent = 'Error al cargar el usuario';
            });
    
            document.getElementById('logout-button').addEventListener('click', function() {
                localStorage.removeItem('token');
                window.location.href = '/auth/login/';
            });
        });
    </script>
    
{% endblock %} 

